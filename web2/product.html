<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Продукт — Трансформаторы и Лампы</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="header">
    <div class="container nav">
      <a href="index.html" class="brand">
        <div class="logo">T&L</div>
        <div>
          <div style="font-weight:700">Трансформаторы и Лампы</div>
          <div class="small">Детали продукта</div>
        </div>
      </a>
      <nav class="menu">
        <a href="index.html">Главная</a>
        <a href="catalog.html">Каталог</a>
        <a href="projects.html">Проекты</a>
        <a href="about.html">О компании</a>
        <a href="contacts.html">Контакты</a>
      </nav>
      <div class="header-right">
        <a class="cta" href="contacts.html">Связаться</a>
      </div>
    </div>
  </header>

  <main class="container section">
    <div id="product-root" class="product-hero">
      <div class="product-gallery card">
        <img id="prod-img" src="https://picsum.photos/seed/prod/900/600" alt="product image">
        <div style="display:flex; gap:8px; margin-top:8px;">
          <img src="https://picsum.photos/seed/prod/200/140" style="width:120px; height:80px; object-fit:cover; border-radius:6px">
          <img src="https://picsum.photos/seed/prod2/200/140" style="width:120px; height:80px; object-fit:cover; border-radius:6px">
        </div>
      </div>

      <div>
        <h2 id="prod-title">Название продукта</h2>
        <div class="meta" id="prod-sub">Категория • короткое описание</div>
        <p style="margin-top:12px" id="prod-desc">Подробное описание продукта. Технические характеристики, инструкция по использованию, особенности ламповой схемы или цифрового ядра и т.д.</p>

        <div style="display:flex; gap:12px; margin-top:16px; align-items:center">
          <button class="btn primary" data-buy="" id="buy-now">Купить</button>
          <a class="btn ghost" href="catalog.html">Вернуться в каталог</a>
        </div>

        <section style="margin-top:20px;">
          <h3 style="color:var(--gold)">Спецификации</h3>
          <ul class="small">
            <li>Тип: ламповый / транзисторный</li>
            <li>Выходная мощность / частотный диапазон</li>
            <li>Гарантия: 5 лет</li>
          </ul>
        </section>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container small">© 2025 Трансформаторы и Лампы</div>
  </footer>

  <!-- buy modal -->
  <div id="buy-modal" class="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:2000; align-items:center; justify-content:center;">
    <div style="background:#0c0c0c; padding:18px; border-radius:10px; width:520px; max-width:94%; position:relative;">
      <button class="close" style="position:absolute; right:12px; top:12px; background:transparent; border:none; color:#ccc; font-size:18px; cursor:pointer">✕</button>
      <h3 class="modal-title" style="margin-top:0">Купить</h3>
      <form id="buy-form" class="form">
        <label>Имя *</label>
        <input name="name" type="text" required>
        <label>Телефон *</label>
        <input name="phone" type="text" required>
        <label>E-mail *</label>
        <input name="email" type="email" required>
        <label>Модель / комментарий</label>
        <input name="model" type="text" id="modal-model">
        <div style="margin-top:12px; display:flex; gap:10px; justify-content:flex-end">
          <button type="button" class="btn ghost close">Отмена</button>
          <button type="submit" class="btn primary">Отправить заявку</button>
        </div>
      </form>
    </div>
  </div>

  <script src="scripts.js"></script>
  <script>
    // небольшая логика чтобы подставлять данные продукта из параметра URL
    function getQuery(){
      const q = {};
      location.search.slice(1).split('&').forEach(p=>{
        if(!p) return;
        const [k,v] = p.split('=');
        q[k]=decodeURIComponent(v||'');
      });
      return q;
    }
    const q = getQuery();
    const title = document.getElementById('prod-title');
    const sub = document.getElementById('prod-sub');
    const desc = document.getElementById('prod-desc');
    const buyBtn = document.getElementById('buy-now');
    const modalModel = document.getElementById('modal-model');

    const map = {
      'lm1':{
        title:'Ламповый микрофон LM-1',
        sub:'Ламповое • микрофон',
        desc:'Классический ламповый микрофон с тёплым характером. Идеален для вокала и акустики.'
      },
      'vmc':{
        title:'Vari-Mu компрессор VM-Classic',
        sub:'Ламповое • компрессор',
        desc:'Оптический вари-му компрессор для плавной динамической обработки.'
      },
      'peq2':{
        title:'Параметрический эквалайзер PEQ-2',
        sub:'Ламповое • эквалайзер',
        desc:'Двухканальный параметрический эквалайзер с ламповым насыщением.'
      },
      'sm5':{
        title:'Активный студийный монитор SM-5',
        sub:'Транзисторное • монитор',
        desc:'Точный контроль, линейная АЧХ, подход для мастеринга.'
      },
      'asg8':{
        title:'Аналоговый синтезатор ASG-8',
        sub:'Транзисторное • синтезатор',
        desc:'Многообразие волновых форм и привычный тёплый аналоговый характер.'
      },
      'cabsim':{
        title:'Эмулятор кабинета CabSim Pro',
        sub:'Транзисторное • эмулятор',
        desc:'Моделируемая реактивная нагрузка и набор кабинетов/микрофонов.'
      },
      'dmc1':{
        title:'DRSSTC MIDI Coil — DMC-1',
        sub:'Tesla • DRSSTC',
        desc:'Высокопроизводительная DRSSTC с MIDI интерфейсом и безопасными режимами работы.'
      }
    };

    if(q.product && map[q.product]){
      const info = map[q.product];
      title.textContent = info.title;
      sub.textContent = info.sub;
      desc.textContent = info.desc;
      buyBtn.dataset.buy = info.title;
      modalModel.value = info.title;
    } else {
      // fallback
      title.textContent = 'Продукт';
      sub.textContent = 'Категория';
      desc.textContent = 'Описание продукта.';
    }

    // attach buy btn to open modal with product name
    buyBtn.addEventListener('click', ()=>{
      const name = buyBtn.dataset.buy || title.textContent;
      document.querySelectorAll('[data-buy]').forEach(el=>{
        /* noop to avoid duplicates */
      });
      // show modal
      const modal = document.getElementById('buy-modal');
      modal.querySelector('.modal-title').textContent = 'Купить: ' + name;
      modal.style.display = 'block';
      document.getElementById('modal-model').value = name;
    });

  </script>
</body>
</html>